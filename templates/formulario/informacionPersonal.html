{% extends  'base/navbar.html' %}
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
{% block content %}


<div class="row">
    <div class="col-md-2">
        

        <!-- The social media icon bar -->

    </div>
    <div class="col-md-8">

    <form method="POST" id="personaForm">
    {% csrf_token %}   


            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-primary">
                        <h4 class="card-title">Información personal</h4>
                    </div>
                    <div class="card-body">
                    <!--inicio del cardbody-->
                        <div class="row">

                            <div class="col-lg-4  col-md-6 form-group">
                                <label>Identificación</label>
                               <label class="form-control" style="background: #fff"> <strong>{{personaOtros.identificacion}}</strong></label>
                            </div>
                            <div class="col-lg-4 col-md-6 form-group">
                                <label>Fecha de nacimiento</label>
                                <label class="form-control" style="background: #fff"><strong>{{personaOtros.fechaNacimiento}}</strong></label>
                            </div>

                            
                            <div class="col-lg-4 col-md-6 form-group">
                                <label>Nombres</label>
                                <label class="form-control" style="background: #fff"><strong>{{personaOtros.nombres}} {{personaOtros.apellidos|default_if_none:'' }}</strong></label>
                            </div>
                       
                            

                            <div class="col-lg-4 col-md-6 form-group">
                                <label>Programa</label>
                                <label class="form-control" style="background: #fff"><strong>{{personaOtros.programa}}</strong></label>
                            </div>
                            <div class="col-lg-4 col-md-6 form-group">
                                <label>genero</label>
                                <label class="form-control" style="background: #fff"><strong>{{personaOtros.genero}}</strong></label>
                            </div>
                            <div class="col-lg-4 col-md-6 form-group">
                                <label>Fecha de grado</label>
                                <label class="form-control" style="background: #fff"><strong>{{personaOtros.fechaGrado}}</strong></label>
                            </div>
                        
                            
                            
                            <div class="col-lg-4 col-md-6  form-group">
                                <div class=" input-field ">
                                    {{form.estado_civil}}
                                    <label for="id_estado_civil">{{form.estado_civil.label}}</label>
                                </div>
                            </div>

                            <div class="col-lg-4 col-md-6  form-group">
                                <div class="input-field">
                                <label>Email 1</label>
                                    {{form.email1}}
                                </div>
                            </div>

                            <div class="col-lg-4 col-md-6 form-group">
                                <div class=" input-field ">
                                    <label>Email 2</label>
                                    {{form.email2}}
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6 form-group">
                                <div class=" input-field ">
                                    
                                    {{form.situacion_laboral_actual}}
                                    <label>{{form.situacion_laboral_actual.label}}</label>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6 form-group">
                                <div class=" input-field ">
                                    
                                    {{form.experiencia_laboral}}
                                    <label>{{form.experiencia_laboral.label}}</label>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6 form-group">
                                <div class=" input-field ">
                                    
                                </div>
                            </div>
                        <!--fin del row-->  
                        
                            <ul class="collection with-header col-md-12">
                                    <li class="collection-item"><strong></strong><h6>Datos de residencia</h6></li>
                                    <li class="collection-item">
                                        <div class="row">
                                            <div class="col-lg-4 col-md-6  form-group">
                                                <div class="input-field">
                                                        <label id="cambiarLabelPais">Pais</label>
                                                        {{form.pais}}

                                                        <datalist id="country">
                                    
                                                        </datalist>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-6  form-group">
                                                <div class="input-field ">
                                                    <label id="id_label_departamento">Departamento</label>
                                                    {{form.departamento}}
                                                    <datalist id="dpto">
                                    
                                                    </datalist>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 col-md-6  form-group">
                                                <div class="input-field ">
                                                    <label id="id_label_ciudad">Ciudad</label>
                                                    {{form.ciudad}}
                                                    <datalist id="city">
                                    
                                                    </datalist>
                                                </div>
                                            </div>

                                            <div class="col-lg-4 col-md-6  form-group">
                                                <div class=" input-field  ">
                                                        {{form.direccionResidencia}}
                                                        <label for="id_direccionResidencia">Dirección de residencia</label>  
                                                </div> 
                                            </div>

                                            <div class="col-lg-4 col-md-6  form-group">
                                                <div class="input-field">
                                                    <label>Teléfono fijo</label>
                                                    {{form.telefonoFijo}}
                                                </div>
                                            </div>
                                            
                                            <div class="col-lg-4 col-md-6  form-group">
                                                <div class="input-field">
                                                    <label>Teléfono de contacto</label>
                                                    {{form.celular}}
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                
                            </ul>
                        </div>

                        
                        <input id="inputformglobal"type="submit" form="personaForm" class="waves-effect waves-light btn modal-trigger light-blue darken-4">Guardar información</input>
                    <!-- fin del card body-->
                    </div>
                </div>
                
            </div>
            
            <br>

            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-primary">
                        <h4 class="card-title">Información académica</h4>
                    </div>
                    <div class="card-body">
                    <!--inicio del cardbody-->      
                        <div class="col-md-12 table-responsive">
                            <table class="table ">
                                <thead>
                                    <tr>
                                        <th><strong>Título obtenido</strong></th>
                                        <th><strong>Institución</strong></th>
                                        <th><strong>Año de graduación</strong></th>
                                        <th><strong>Nivel de educación formal</strong></th>
                                        <th><strong></strong></th>
                                    </tr>
                                </thead>
                                <tbody class="aux">
                                  
                                    {% if titulosPersona %}
                                    {% for curso in titulosPersona %}
                                    <tr id="ocultar{{curso.id}}">
                                        <div>
                                            <td>
                                                {{curso.titulo_obtenido}}
                                            </td>
                                            <td>
                                                {{curso.institucion}}
                                            </td>

                                            <td>
                                                {{curso.anioGraduacion}}
                                            </td>
                                            <td>
                                                {{curso.nivel_educacion_formal}}
                                            </td>
                                            <td>
                                                <a class="btn-floating btn-small yellow accent-4" href="{% url 'academica_update' curso.id %}" >
                                                        <i class="material-icons">edit</i>
                                                </a>
                                                
                                                <button type="button" rel="tooltip" class="btn-floating btn-small red" onclick="eliminarTitulo({{curso.id}})" >
                                                        <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </div>
                                    </tr>
                        {% endfor %}
                        {% endif %}
                                 
                                </tbody>
                            </table>
                        </div>

                          <!-- Modal Trigger -->
                        <a class="waves-effect waves-light btn modal-trigger light-blue darken-4" href="#modal1">Agregar nueva información</a>

                        <!-- Modal Structure -->
                        <div id="modal1" class="modal modal-fixed-footer modalInstitucion">
                        <div class="modal-content">
                           <form id="nuevo">
                            <div class="input-field col s12">
                                {{degreeForm.titulo_obtenido}}
                                <label for="id_titulo_obtenido">{{degreeForm.titulo_obtenido.label}}</label>   
                            </div> 
                            <div class="input-field col s12">
                                {{degreeForm.institucion}}
                                <label for="id_institucion">{{degreeForm.institucion.label}}</label>   
                            </div>                            
                            <div class="input-field col s12">
                                {{degreeForm.anioGraduacion}}
                                <label for="id_anioGraduacion">{{degreeForm.anioGraduacion.label}}</label>   
                            </div>
                            <div class="input-field col s12">
                                {{degreeForm.nivel_educacion_formal}}
                                <label for="id_nivel_educacion_formal">{{degreeForm.nivel_educacion_formal.label}}</label>   
                            </div>  
                        </form>
                                
                        </div>
                        <div class="modal-footer">
                            <a  class="modal-close waves-effect waves-green btn-flat">Cancelar</a>
                            <a id='enviarAjax'  class="waves-effect waves-green btn-flat">Agregar</a>
                            
                        </div>
                        </div>
                    <!--fin del cardbody-->
                    </div>
                </div>
            </div>




            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-primary">
                        <h4 class="card-title">Información laboral</h4>
                    </div>
                    <div class="card-body">
                        <div class="col-md-12 table-responsive">
                            <table class="table striped">
                                <thead>
                                    <tr>
                                        <th><strong>Nombre de la empresa</strong></th>
                                        <th><strong>Fecha de Ingreso</strong></th>
                                        <th><strong>Fecha de finalización</strong></th>
                                        
                                        <th><strong></strong></th>
                                    </tr>
                                </thead>
                                <tbody class="auxlaboral">
                                  
                                    {% if infoLaboral %}
                                    {% for inf in infoLaboral %}
                                    <tr id="ocultarlaboral{{inf.id}}">
                                        <div>
                                            <td>
                                                {{inf.nombreEmpresaTrabajoActual}}
                                            </td>
                                            <td>
                                                {{inf.fechaInicio}}
                                            </td>

                                            <td>
                                            {{inf.fechaFin|default_if_none:'En curso'}}
                                            </td>
                                            
                                            <td>
                                                <!-- Modal Trigger -->
                                                <a class="btn-floating btn-small modal-trigger" href="#infoModal{{inf.id}}"><i class="material-icons">zoom_in</i></a>

                                                <button type="button" rel="tooltip" class="btn-floating btn-small red" onclick="eliminarLaboral({{inf.id}})" >
                                                        <i class="material-icons">close</i>
                                                </button>
                                                
                                            </td>
                                        </div>
                                    </tr>
                                    <!-- Modal para Mostrar mas informaci]on-->
                                    
                                    
                                    

                                    <!-- Modal Structure -->
                                    <div id="infoModal{{inf.id}}" class="modal bottom-sheet">
                                        <div class="modal-content">
                                        <h5>Más información</h5>
                                        <br>
                                       

                                            <div class="row">
                                                <div class="col-lg-4 col-md-6  form-group">

                                                <label for="id_situacion_laboral_actual">{{infoLaboralForm.fechaInicio.label}}</label><br>
                                                {{inf.fechaInicio}}
                                                </div>

                                                <div class="col-lg-4 col-md-6  form-group">
                                                <label for="id_situacion_laboral_actual">{{infoLaboralForm.fechaFin.label}}</label><br>
                                                {{inf.fechaFin|default_if_none:'En curso'}}
                                                </div>

                                                <div class="col-lg-4 col-md-6  form-group">
                                                <label for="inf.nombreEmpresaTrabajoActual">{{infoLaboralForm.nombreEmpresaTrabajoActual.label}}</label><br>
                                                {{inf.nombreEmpresaTrabajoActual}}
                                                </div>
                                                <div class="col-lg-4 col-md-6  form-group">
                                                <label for="inf.sectorDeLaEmpresa">{{infoLaboralForm.sectorDeLaEmpresa.label}}</label><br>
                                                {{inf.sectorDeLaEmpresa}}
                                                </div>
                                                <div class="col-lg-4 col-md-6  form-group">
                                                <label for="inf.areaDeTrabajo">{{infoLaboralForm.areaDeTrabajo.label}}</label><br>
                                                {{inf.areaDeTrabajo}}
                                                </div>
                                                <div class="col-lg-4 col-md-6  form-group">
                                                <label for="inf.cargoQueOcupa">{{infoLaboralForm.cargoQueOcupa.label}}</label><br>
                                                {{inf.cargoQueOcupa}}
                                                </div>
                                                <div class="col-lg-4 col-md-6  form-group">
                                                <label for="inf.nombreJefeInmediato">{{infoLaboralForm.nombreJefeInmediato.label}}</label><br>
                                                {{inf.nombreJefeInmediato}}
                                                </div>
                                                <div class="col-lg-4 col-md-6  form-group">
                                                <label for="inf.areaTrabajoAfinConSuProfesion">{{infoLaboralForm.areaTrabajoAfinConSuProfesion.label}}</label><br>
                                                {{inf.areaTrabajoAfinConSuProfesion}}
                                                </div>
                                                <div class="col-lg-4 col-md-6  form-group">
                                                <label for="inf.tipoDeContrato">Tipo de contrato</label><br>
                                                {{inf.tipoDeContrato}}
                                                </div>
                                                <div class="col-lg-4 col-md-6  form-group">                               
                                                <label for="inf.rangoSalarial">Rango salarial</label>  <br>  
                                                {{inf.rangoSalarial}}                                
                                                </div>
                                                <div class="col-lg-4 col-md-6  form-group">                               
                                                <label for="inf.rangoSalarial">{{infoLaboralForm.checkTrabajoActual.label}}</label>    
                                                <p class="quitarCheckTrabajo">{{inf.checkTrabajoActual }}</p>
                                                </div>
                                        </div>
                                        <div class="modal-footer">
                                        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Cerrar</a>
                                        </div>
                                    </div>
                                    </div>
        
                                    {% endfor %}
                                    {% endif %}
                                 
                                </tbody>
                            </table>
                        </div>



                        
                        <a class="waves-effect waves-light btn modal-trigger light-blue darken-4" href="#modal5">Agregar nueva información laboral</a>
                        <div id="modal5" class="modal modal-fixed-footer modalInfoLaboral">
                        <div class="modal-content">
                            <div class="row "> 

                                <div class="col-lg-6 col-md-6 ">
                                    <div class="input-field">
                                        {{infoLaboralForm.nombreEmpresaTrabajoActual}}
                                       <label for="id_nombreEmpresaTrabajoActual">{{infoLaboralForm.nombreEmpresaTrabajoActual.label}}</label>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6  ">
                                    <div class="input-field">
                                        {{infoLaboralForm.sectorDeLaEmpresa}}
                                        <label for="id_sectorDeLaEmpresa">{{infoLaboralForm.sectorDeLaEmpresa.label}}</label>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 ">
                                    <div class="form-group">
                                        <label >{{infoLaboralForm.fechaInicio.label}}</label>
                                        {{infoLaboralForm.fechaInicio}}
                                       
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 ">
                                    <div class="form-group">
                                            <label for="id_fechaFin">{{infoLaboralForm.fechaFin.label}}</label>
                                        {{infoLaboralForm.fechaFin}}
                                       
                                    </div>
                                </div>
                                
                                <div class="col-lg-6 col-md-6 ">
                                    <div class="input-field">
                                        {{infoLaboralForm.areaDeTrabajo}}
                                       <label for="id_areaDeTrabajo">{{infoLaboralForm.areaDeTrabajo.label}}</label>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6  ">
                                    <div class="input-field">
                                        {{infoLaboralForm.cargoQueOcupa}}
                                        <label for="id_cargoQueOcupa">{{infoLaboralForm.cargoQueOcupa.label}}</label>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 ">
                                    <div class="input-field">
                                        {{infoLaboralForm.nombreJefeInmediato}}
                                       <label for="id_nombreJefeInmediato">{{infoLaboralForm.nombreJefeInmediato.label}}</label>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6  ">
                                    <div class="input-field">
                                        {{infoLaboralForm.areaTrabajoAfinConSuProfesion}}
                                        <label for="id_areaTrabajoAfinConSuProfesion">{{infoLaboralForm.areaTrabajoAfinConSuProfesion.label}}</label>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6  ">
                                    <div class="input-field">
                                        {{infoLaboralForm.tipoDeContrato}}
                                        <label for="id_tipoDeContrato">Tipo de contrato</label>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6  ">
                                    <div class="input-field">
                                        {{infoLaboralForm.rangoSalarial}}
                                        <label for="id_rangoSalarial">Rango salarial</label>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6  ">
                                    <div class="input-field">
                                    {{infoLaboralForm.checkTrabajoActual}}
                                        <label for="id_rangoSalarial">{{infoLaboralForm.checkTrabajoActual.label}}</label>
                                    </div>
                                </div>
                                
            
            
            
            
                            </div>

                        </div>
                        <div class="modal-footer">
                            <a  class="modal-close waves-effect waves-green btn-flat">Cancelar</a>
                            <a id='enviarInfoLaboral'  class="waves-effect waves-green btn-flat">Agregar</a>
                            
                        </div>




                    </div>  
                </div>
            </div>


            <!-- ############################################################################## -->
            <br>
         


            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-primary">
                        <h4 class="card-title">Participación en comunidades y asociaciones</h4>
                    </div>
                    <div class="card-body">
                          
                        <div class="col-md-12 table-responsive">
                            <table class="table ">
                                <thead>
                                    <tr>
                                        <th><strong>Tipo de comunidad</strong></th>
                                        <th><strong>Nombre de la comunidad</strong></th>
                                        <th><strong>Ámbito</strong></th>
                                        <th><strong> </strong></th>
                                    </tr>
                                </thead>
                                <tbody class="auxParticipaciones">
                                  
                                    {% if titulosComunidades %}
                                    {% for curso in titulosComunidades %}
                                    <tr id="ocultarComunidad{{curso.id}}">
                                        <div>
                                            <td>
                                                {{curso.tipoDeComunidad}}
                                            </td>
                                            <td>
                                                {{curso.nombreDeLaComunidad}}
                                            </td>

                                            <td>
                                                {{curso.ambitoParticipacion}}
                                            </td>
                                            <td>
                                                <button type="button" rel="tooltip" class="btn-floating btn-small red" onclick="eliminarTituloParticipaciones({{curso.id}})" >
                                                        <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </div>
                                    </tr>
                        {% endfor %}
                        {% endif %}
                                 
                                </tbody>
                            </table>
                        </div>

                       
                        <!-- Modal Trigger -->
                        <a class="waves-effect waves-light btn modal-trigger light-blue darken-4" href="#modal2">Agregar nueva participación</a>

                        <!-- Modal Structure -->
                        <div id="modal2" class="modal modal-fixed-footer modalParticipaciones">
                        <div class="modal-content">
                                 
                            <div class="input-field col s12">
                                    {{participacionesForm.tipoDeComunidad}}
                                    <label for="id_tipoDeComunidad">{{participacionesForm.tipoDeComunidad.label}}</label>   
                            </div>                            
                            <div class="input-field col s12">
                                    {{participacionesForm.nombreDeLaComunidad}}
                                    <label for="id_nombreDeLaComunidad">{{participacionesForm.nombreDeLaComunidad.label}}</label>   
                            </div> 
                            <div class="input-field col s12">
                                    {{participacionesForm.ambitoParticipacion}}
                                    <label for="id_ambitoParticipacion">{{participacionesForm.ambitoParticipacion.label}}</label>   
                            </div> 


                        </div>
                        <div class="modal-footer">
                            <a  class="modal-close waves-effect waves-green btn-flat">Cancelar</a>
                            <a id='enviarAjaxParticipaciones'  class="waves-effect waves-green btn-flat ">Agregar</a>
                            
                        </div>
                        </div>
                    </div>

                </div>
            </div>



             
            <br>

            <!-- ############################################################################## -->



            <!-- ############################################################################## -->
            

            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-primary">
                        <h4 class="card-title">Distinciones y reconocimientos</h4>
                    </div>
                    <div class="card-body">
                         
                        <div class="col-md-12  table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th><strong>Nombre del reconocimiento</strong></th>
                                        <th><strong>Institución otorgante</strong></th>
                                        <th><strong>Fecha</strong></th>
                                        <th><strong>Ámbito</strong></th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody class="auxReconocimiento">
                                  
                                    {% if reconocimientosPersona %}
                                    {% for curso in reconocimientosPersona %}
                                    <tr id="ocultarReconocimiento{{curso.id}}">
                                        <div>
                                            <td>
                                                {{curso.titulo_obtenido_reconocimiento}}
                                            </td>
                                            <td>
                                                {{curso.institucionReconocimiento}}
                                            </td>

                                            <td>
                                                {{curso.anioReconocimiento}}
                                            </td>
                                            <td>
                                                {{curso.ambito}}
                                            </td>

                                            <td>
                                                    <a class="btn-floating btn-small cyan "><i class="material-icons">edit</i></a>
                                                <button type="button" rel="tooltip" class="btn-floating btn-small red" onclick="eliminarReconocimiento({{curso.id}})" >
                                                        <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </div>
                                    </tr>
                        {% endfor %}
                        {% endif %}
                                 
                                </tbody>
                            </table>
                        </div>
                             <!-- Modal Trigger -->
                        <a class="waves-effect waves-light btn modal-trigger light-blue darken-4" href="#modal3">Agregar nuevo reconocimiento</a>

                        <!-- Modal Structure -->
                        <div id="modal3" class="modal modal-fixed-footer modalReconocimiento">
                        <div class="modal-content">
                                
                                
                            <div class="input-field col s12">
                                {{reconocimietosForm.titulo_obtenido_reconocimiento}}
                                <label for="id_titulo_obtenido_reconocimiento">{{reconocimietosForm.titulo_obtenido_reconocimiento.label}}</label>
                            </div>
                            <div class="input-field col s12">
                                {{reconocimietosForm.institucionReconocimiento}}
                                

                                <label for="id_institucionReconocimiento">{{reconocimietosForm.institucionReconocimiento.label}}</label>
                            </div>    
                            <div class="input-field col s12">
                                {{reconocimietosForm.anioReconocimiento}}
                                <label for="id_anioReconocimiento">{{reconocimietosForm.anioReconocimiento.label}}</label>
                            </div>  
                            <div class="input-field col s12">
                                {{reconocimietosForm.ambito}}
                                <label for="id_ambito">{{reconocimietosForm.ambito.label}}</label>
                            </div>                       
                                
                        </div>
                        <div class="modal-footer">
                                <a  class="modal-close waves-effect waves-green btn-flat">Cancelar</a>
                            <a id='agregarReconocimientoAjax'  class="waves-effect waves-green btn-flat ">Agregar</a>
                            
                        </div>
                        </div>
                    </div>
                </div>
            </div>



            <br> 

              
         


            <!-- ############################################################################## -->

            <!-- ############################################################################## -->
            



            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-primary">
                        <h4 class="card-title">Publicaciones</h4>
                    </div>
                    <div class="card-body">
                          
                        <div class="col-md-12 table-responsive">
                            <table class="table ">
                                <thead>
                                    <tr>
                                        <th><strong>Título de la publicación</strong></th>
                                        <th><strong>Fecha de publicación</strong></th>
                                        <th><strong>Tipo de publicación</strong></th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody class="auxPublicacion">
                                  
                                    {% if publicacionesPersona %}
                                    {% for curso in publicacionesPersona %}
                                    <tr id="ocultarPublicacion{{curso.id}}">
                                        <div>
                                            <td>
                                                {{curso.titulo_publicacion}}
                                            </td>
                                            <td>
                                                {{curso.anio}}
                                            </td>

                                            <td>
                                                {{curso.tipo_publicacion}}
                                            </td>
                                            <td>
                                                <button type="button" rel="tooltip" class="btn-floating btn-small red" onclick="eliminarPublicacion({{curso.id}})" >
                                                        <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </div>
                                    </tr>
                        {% endfor %}
                        {% endif %}
                                 
                                </tbody>
                            </table>
                        </div>
                         <!-- Modal Trigger -->
                        <a class="waves-effect waves-light btn modal-trigger light-blue darken-4" href="#modal4">Agregar nueva publicación</a>

                        <!-- Modal Structure -->
                        <div id="modal4" class="modal modal-fixed-footer modalPublicaciones">
                        <div class="modal-content">
                                
                            <div class="input-field col s12">
                                {{publicacionesForm.tipo_publicacion}}
                                <label for="id_tipo_publicacion">{{publicacionesForm.tipo_publicacion.label}}</label>
                            </div>
                            <div class="input-field col s12">
                                {{publicacionesForm.titulo_publicacion}}
                                <label for="id_titulo_publicacion">{{publicacionesForm.titulo_publicacion.label}}</label>
                            </div>
                            

                            <div class="input-field col s12">
                                {{publicacionesForm.anio}}
                                <label for="id_anio">Fecha de publicacion</label>
                            </div>
                            
                           
                            
                        
                        </div>
                        <div class="modal-footer">
                            <a  class="modal-close waves-effect waves-green btn-flat">Cancelar</a>
                            <a id='guardarPublicacion'  class="waves-effect waves-green btn-flat ">Agregar</a>
                            
                        </div>
                        </div>
                        
                    </div>
                </div>
            </div>

            <br>

              
          




            <!-- ############################################################################## -->

            <!-- ############################################################################## -->
            
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-primary">
                        <h4 class="card-title">Vinculación en la vida institucional</h4>
                    </div>
                    <div class="card-body">
                        
                        <div class="row">
                            <div class="col-lg-12 col-md-12  form-group">
                                <div class=" input-field  ">
                                        {{form.participacionActividadesUnimar}}
                                        
                                        <label for="id_direccionResidencia">{{form.participacionActividadesUnimar.label}}</label>  
                                </div> 
                            </div>  

                            <div class="col-lg-12 col-md-12  form-group">
                                <div class=" input-field  ">
                                        {{form.serviciosDeInteres}}
                                        <label for="id_direccionResidencia">{{form.serviciosDeInteres.label}}</label>  
                                </div> 
                            </div>                      
                        </div>




                        <div class="row col-md-12 form-group">
                                <h5 class="card-title">Calidad de formación recibida</h5>  
                                
                        </div>
                        <div class="row col-md-12 form-group">
                                <div class="row col-md-12 form-group">
                                <label>{{form.procesoDeInformacionUnimar.label}}</label>
                                </div>
                                <div class="row col-md-12 form-group">
                                {{form.procesoDeInformacionUnimar}}
                                </div>
                        </div>
                        <input id="inputformglobal"type="submit" form="personaForm" class="waves-effect waves-light btn modal-trigger light-blue darken-4">Guardar información</input>
                    </div>
                    
                </div>
                
            </div>

            
            
    <!--Lista de sector, area de trabajo y cargo ocupado-->
    <datalist id="opcionesSectorEmpresa">
        {% if opcionesSectorEmpresa %}
        {% for e in opcionesSectorEmpresa %}        
        <option>{{e}}</option>
        {% endfor %}
        {% endif %}
    </datalist>
    <datalist id="opcionesCargoOcupado">
        {% if opcionesCargoOcupado %}
        {% for e in opcionesCargoOcupado %}        
        <option>{{e}}</option>
        {% endfor %}
        {% endif %}
                    
    </datalist>
    <datalist id="opcionesAreaDeTrabajo">
        {% if opcionesAreaDeTrabajo %}
        {% for e in opcionesAreaDeTrabajo %}        
        <option>{{e}}</option>
        {% endfor %}
        {% endif %}
    </datalist>
    


    

    </form>
    </div>

    <div class="col-md-2"></div>
</div>





 
<div class="row">
<div class="col-md-2"></div>
<div class="col-md-8">
        
</div>
 
<div class="col-md-2"></div>
</div>





{% endblock %}

{% block javascript%}

    
     <script src="../../static/assets/js/jsDeInformacionPersonal/country.js"></script>

	 <script>


        function hacerAlgo(){
            $(document).ready(function(){
                console.log("scrsssoll");
        
        });
            
        }
        $("#inputformglobal").click(function(){  
        $("#personaForm").submit();
        });
          
         $(document).ready(function(){
            $('.modal').modal();
            // $('.datepicker').datepicker({
            //     min: new Date(2022,1,1)
            // });
        
        });

        //mantener posicion al refrescar
        window.onload = function () {
            console.log("scroll");
            if ( window.location.href.indexOf('page_y') != -1 ) {
                console.log("scroll");
                var match = window.location.href.split('?')[1].split("&")[0].split("=");
                $('html, body').scrollTop( match[1] );
                console.log("scroll");
                hacerAlgo();
                swal("Good job!", "You clicked the button!", "success");

            }
            console.log("scroll");
            
        }
         //seleccionar texto cuando se haga click
        $("#id_pais").click(function() {
              $("#id_pais").select();
        })
        $("#id_departamento").click(function() {
              $("#id_departamento").select();
        })
        $("#id_ciudad").click(function() {
              $("#id_ciudad").select();
        })
        $("#universidades").click(function() {
              $("#universidades").select();
        })
        
        
        // #########################################################################
        // estilos de los select 
        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('select');
            //var instances = M.FormSelect.init(elems, options);
        });
        window.addEventListener("keypress", function(event){
            if (event.keyCode == 13){
                event.preventDefault();
            }
        }, false);

        // Or with jQuery

        // $(document).ready(function(){
        //     $('select').formSelect();
        // });
        // #########################################################################
        

	$(function(){
        //Obtenemos la información de csfrtoken que se almacena por cookies en el cliente
        var csrftoken = getCookie('csrftoken');

        //Agregamos en la configuración de la funcion $.ajax de Jquery lo siguiente:
        $.ajaxSetup({
                        beforeSend: function(xhr, settings) {
                            if (!csrfSafeMethod(settings.type) && sameOrigin(settings.url)) {
                                // Send the token to same-origin, relative URLs only.
                                // Send the token only if the method warrants CSRF protection
                                // Using the CSRFToken value acquired earlier
                                xhr.setRequestHeader("X-CSRFToken", csrftoken);
                            }
                        }
        });

        function sameOrigin(url) {
            // test that a given url is a same-origin URL
            // url could be relative or scheme relative or absolute
            var host = document.location.host; // host + port
            var protocol = document.location.protocol;
            var sr_origin = '//' + host;
            var origin = protocol + sr_origin;
            // Allow absolute or scheme relative URLs to same origin
            return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
                (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
                // or any other URL that isn't scheme relative or absolute i.e relative.
                !(/^(\/\/|http:|https:).*/.test(url));
        }

        // usando jQuery
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie != '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }


        function csrfSafeMethod(method) {
            // estos métodos no requieren CSRF
            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
        }
    });


        function eliminarTitulo(cursoId){
            var ed = {
                cursoId:cursoId
            };
            $.ajax({
                //url: "/guardarGradoAjax",
                url: "{% url 'borrar_titulo' %}",
                type: "POST",
                data: ed,
                cache:false,
                dataType: "json",
                success: function(resp){
                    $('#ocultar'+resp.id).hide();
                    console.log('id eliminado '+ resp.id);
                    }
            });

        }

        function eliminarTituloParticipaciones(cursoIdComunidades){
            var ed = {
                cursoId:cursoIdComunidades
            };
            console.log(cursoIdComunidades);
            $.ajax({
                //url: "/guardarGradoAjax",
                url: "{% url 'borrar_comunidad' %}",
                type: "POST",
                data: ed,
                cache:false,
                dataType: "json",
                success: function(resp){
                    $('#ocultarComunidad'+resp.id).hide();
                    console.log('id eliminado '+ resp.id);
                    }
            });

        }
        function eliminarReconocimiento(cursoIdComunidades){
            var ed = {
                cursoId:cursoIdComunidades
            };
            console.log(cursoIdComunidades);
            $.ajax({
                //url: "/guardarGradoAjax",
                url: "{% url 'borrar_reconocimiento' %}",
                type: "POST",
                data: ed,
                cache:false,
                dataType: "json",
                success: function(resp){
                    $('#ocultarReconocimiento'+resp.id).hide();
                    console.log('id eliminado '+ resp.id);
                    }
            });

        }
        function eliminarPublicacion(cursoIdComunidades){
            var ed = {
                cursoId:cursoIdComunidades
            };
            console.log(cursoIdComunidades);
            $.ajax({
                //url: "/guardarGradoAjax",
                url: "{% url 'borrar_publicacion' %}",
                type: "POST",
                data: ed,
                cache:false,
                dataType: "json",
                success: function(resp){
                    $('#ocultarPublicacion'+resp.id).hide();
                    console.log('id eliminado '+ resp.id);
                    }
            });

        }
        function eliminarLaboral(infLabId){
            var ed = {
                infoLabId:infLabId
            };
            $.ajax({
                //url: "/guardarGradoAjax",
                url: "{% url 'borrar_info_laboral' %}",
                type: "POST",
                data: ed,
                cache:false,
                dataType: "json",
                success: function(resp){
                    $('#ocultarlaboral'+resp.id).hide();
                    console.log('id eliminado '+ resp.id);
                    }
            });

        }

        var anio = new Date();

        $('#enviarAjax').on('click', function(){
            var id_titulo_obtenido =  $('#id_titulo_obtenido').val();
            var id_institucion =  $('#id_institucion').val();
            var id_anioGraduacion =  $('#id_anioGraduacion').val();
            var id_nivel_educacion_formal =  $('#id_nivel_educacion_formal').val();

            if(id_titulo_obtenido != "" & id_institucion != "" & id_anioGraduacion != "" &id_nivel_educacion_formal != "" &&  isNaN(id_anioGraduacion) === false && parseInt(id_anioGraduacion)<=anio.getFullYear() && parseInt(id_anioGraduacion)>=(anio.getFullYear() -80) )
            {
                
                var ed = {
                    id_titulo_obtenido : id_titulo_obtenido,
                    id_institucion: id_institucion,
                    id_anioGraduacion: id_anioGraduacion,
                    id_nivel_educacion_formal: id_nivel_educacion_formal
                };

                $.ajax({
                    url: "{% url 'guardar_titulo' %}",
                    type: "POST",
                    data: ed,
                    cache:false,
                    dataType: "json",
                    success: function(resp){
                        var meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
                        var fechaSplit = id_anioGraduacion.split("-");
                        var html = `
                                <tr id="ocultar${resp.id}">
                                    <td>
                                    ${resp.id_titulo_obtenido}
                                    </td>
                                    <td>
                                    ${resp.id_institucion}
                                    </td>
                                    <td>
                                    ${fechaSplit[2]} de ${meses[fechaSplit[1]-1]} de ${fechaSplit[0]}
                                    </td>
                                    <td>
                                    ${resp.id_nivel_educacion_formal}
                                    </td>
                                    <td>  
                                    <button type="button" rel="tooltip" class="btn btn-danger btn-round btn-sm" onclick="eliminarTitulo(${resp.id})" >
                                                    <i class="material-icons">close</i>
                                    </button>
                                    </td>

                                </tr>
                            `;
                           
                                $('#id_titulo_obtenido').val('');
                                $('#id_institucion').val('');
                                $('#id_anioGraduacion').val('');
                                $('#id_nivel_educacion_formal').val('');
                                let auxIns = document.querySelector('.modalInstitucion');
                                let instance = M.Modal.getInstance(auxIns);
                                instance.close();
                                
                            
                    document.querySelector('.aux').innerHTML += html;
                    //var a = json_loads(resp)
                    var page_y = $( document ).scrollTop();
                    window.location.href = window.location.href + '?page_y=' + page_y;
                    window.location.reload();

                    //console.log(a);
                        }
                    });
                    //Fin de la peticion AJAX

                }
                else{
                    // alert("Por favor llena todos los campos");
                    
                   
                    if(isNaN(id_anioGraduacion) === true || parseInt(id_anioGraduacion)>anio.getFullYear() || parseInt(id_anioGraduacion)<(anio.getFullYear() -80) ) {
                        var texto = `El año de graduaciòn debe ser un numero entre el año actual y ${anio.getFullYear()-80} `;
                        M.toast({html:texto})
                      
                   }
                    if(id_titulo_obtenido == "") {
                        $('#id_titulo_obtenido').focus();
                        lanzaToast('"Título obtenido"');
                    }

                    else if(id_institucion == "") {
                        $('#id_institucion').focus();
                        lanzaToast('"Institución"');
                    }

                    else if(id_anioGraduacion == "") {
                        $('#id_anioGraduacion').focus();
                        lanzaToast('"Año de graduación"');
                    }

                    else if(id_nivel_educacion_formal == "") {
                        $('#id_nivel_educacion_formal').focus();
                        lanzaToast('"Nivel de educación formal"');
                    }


               

                }
            });

        $('#enviarAjaxParticipaciones').on('click',function(){
            

            var id_tipoDeComunidad =  $('#id_tipoDeComunidad').val();
            var id_nombreDeLaComunidad =  $('#id_nombreDeLaComunidad').val();
            var id_ambito =  $('#id_ambitoParticipacion').val();
            
            if(id_tipoDeComunidad != "" && id_nombreDeLaComunidad != "" && id_ambito != ""){


            var ed = {
                id_tipoDeComunidad : id_tipoDeComunidad,
                id_nombreDeLaComunidad: id_nombreDeLaComunidad,
                id_ambito: id_ambito
            };

            $.ajax({
                    url: "{% url 'guardar_participacion' %}",
                    type: "POST",
                    data: ed,
                    cache:false,
                    dataType: "json",
                    success: function(resp){
                        
                        var html = `
                                <tr id="ocultarComunidad${resp.id}">
                                    <div>
                                        <td>
                                            ${resp.id_tipoDeComunidad}
                                        </td>
                                        <td>
                                            ${resp.id_nombreDeLaComunidad}
                                        </td>

                                        <td>
                                            ${resp.id_ambito}
                                        </td>
                                        <td>
                                            <button type="button" rel="tooltip" class="btn btn-danger btn-round btn-sm" onclick="eliminarTituloParticipaciones(${resp.id})" >
                                                    <i class="material-icons">close</i>
                                            </button>
                                        </td>
                                    </div>
                                </tr>
                            `;

                    document.querySelector('.auxParticipaciones').innerHTML += html;
                        $('#id_tipoDeComunidad').val('');
                        $('#id_nombreDeLaComunidad').val('');
                        $('#id_ambitoParticipacion').val('');
                        let aux = document.querySelector('.modalParticipaciones');
                        var instance = M.Modal.getInstance(aux);
                        instance.close();

                        }
                    });


            }
            else{
                if( id_tipoDeComunidad =="")  {
                    $('#id_tipoDeComunidad').focus();
                   lanzaToast('"Tipo de comunidad"');
                }
                else if( id_nombreDeLaComunidad =="")  {
                    $('#id_nombreDeLaComunidad').focus();
                   lanzaToast('"Nombre de la comunidad"');
                }
                else if( id_ambito =="")  {
                    $('#id_ambito').focus();
                   lanzaToast('"Ámbito"');
                }
            }

                });

        $('#agregarReconocimientoAjax').on('click', function(){
            var id_titulo_obtenido_reconocimiento =  $('#id_titulo_obtenido_reconocimiento').val();
            var id_institucionReconocimiento =  $('#id_institucionReconocimiento').val();
            var id_anioReconocimiento =  $('#id_anioReconocimiento').val();
            var id_ambito =  $('#id_ambito').val();

            if(id_titulo_obtenido_reconocimiento != "" && id_institucionReconocimiento != "" && id_anioReconocimiento != "" && id_ambito != ""){

            var ed = {
                id_titulo_obtenido_reconocimiento : id_titulo_obtenido_reconocimiento,
                id_institucionReconocimiento: id_institucionReconocimiento,
                id_anioReconocimiento: id_anioReconocimiento,
                id_ambito: id_ambito
            };

            $.ajax({
                url: "{% url 'guardar_reconocimiento' %}",
                type: "POST",
                data: ed,
                cache:false,
                dataType: "json",
                success: function(resp){
                    var meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
                    var fechaSplit = id_anioReconocimiento.split("-");
                    var html = `

                        <tr id="ocultarReconocimiento${resp.id}">
                                <div>
                                        <td>
                                            ${resp.id_titulo_obtenido_reconocimiento}
                                        </td>
                                        <td>
                                            ${resp.id_institucionReconocimiento}
                                        </td>

                                        <td>
                                            ${fechaSplit[2]} de ${meses[fechaSplit[1]-1]} de ${fechaSplit[0]}
                                        </td>
                                        <td>
                                            ${resp.id_ambito}
                                        </td>

                                        <td>
                                            <button type="button" rel="tooltip" class="btn btn-danger btn-round btn-sm" onclick="eliminarReconocimiento(${resp.id})" >
                                                    <i class="material-icons">close</i>
                                            </button>
                                        </td>
                                </div>
                            </tr>
                        `;

                document.querySelector('.auxReconocimiento').innerHTML += html;
                    $('#id_titulo_obtenido_reconocimiento').val('');
                    $('#id_institucionReconocimiento').val('');
                    $('#id_anioReconocimiento').val('');
                    $('#id_ambito').val('');

                    let aux = document.querySelector('.modalReconocimiento');
                    var instance = M.Modal.getInstance(aux);
                    instance.close();
                    
                    }
                   
            });

                }else{
                    if(id_titulo_obtenido_reconocimiento =="") {
                        $('#id_titulo_obtenido_reconocimiento').focus();
                        lanzaToast('"Nombre del reconocimiento"');
                    }
                    else if(id_institucionReconocimiento=="") {
                        $('#id_institucionReconocimiento').focus();
                        lanzaToast('"Institución otorgante"');
                    }
                    else if(id_anioReconocimiento=="") {
                        $('#id_anioReconocimiento').focus();
                        lanzaToast('"Fecha"');
                    }
                    else if(id_ambito=="") {
                        $('#id_ambito').focus();
                        lanzaToast('"Ámbito"');
                    }
                   
                    
                }

            });

        $('#guardarPublicacion').on('click', function(){
            var id_titulo_publicacion =  $('#id_titulo_publicacion').val();
            var id_anio =  $('#id_anio').val();
            var id_tipo_publicacion =  $('#id_tipo_publicacion').val();
          
            if(id_titulo_publicacion != "" && id_anio != "" && id_tipo_publicacion != ""){

            var ed = {
                id_titulo_publicacion : id_titulo_publicacion,
                id_anio: id_anio,
                id_tipo_publicacion: id_tipo_publicacion
            };

            $.ajax({
                url: "{% url 'guardar_publicacion' %}",
                type: "POST",
                data: ed,
                cache:false,
                dataType: "json",
                success: function(resp){
                    var meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
                     var fechaSplit = id_anio.split("-");
                    var html = `
                                <tr id="ocultarPublicacion${resp.id}">
                                    <div>
                                        <td>
                                            ${resp.id_titulo_publicacion}
                                        </td>
                                        <td>
                                            ${fechaSplit[2]} de ${meses[fechaSplit[1]-1]} de ${fechaSplit[0]}
                                        </td>

                                        <td>
                                            ${resp.id_tipo_publicacion}
                                        </td>
                                        <td>
                                            <button type="button" rel="tooltip" class="btn btn-danger btn-round btn-sm" onclick="eliminarPublicacion(${resp.id})" >
                                                    <i class="material-icons">close</i>
                                            </button>
                                        </td>
                                    </div>
                                </tr>
                        `;

                document.querySelector('.auxPublicacion').innerHTML += html;
                  $('#id_titulo_publicacion').val('');
                    $('#id_anio').val('');
                    $('#id_tipo_publicacion').val('');
                    // $('#publicaciones').modal({dismissible: false});      
                    // $('#publicaciones').modal('close');
                    // $('#publicaciones').modal('toggle');
                    let aux = document.querySelector('.modalPublicaciones');
                    var instance = M.Modal.getInstance(aux);
                    instance.close();

                    }
                  
            });

        }
        else{
            if( id_tipo_publicacion  =="" ) {
                $('#id_tipo_publicacion').focus();
                lanzaToast('"Tipo de publicación"');
            }  
            else if( id_titulo_publicacion ==""  ) {
                $('#id_titulo_publicacion').focus();
                lanzaToast('"Título de la publicación"');
            }  
            else if( id_anio =="" ) {
                $('#id_anio').focus();
                lanzaToast('"Fecha de publicación"');   
            } 
             
        }
        });

        $('#enviarInfoLaboral').on('click', function(){
            var id_nombreEmpresaTrabajoActual = $('#id_nombreEmpresaTrabajoActual').val();
            var id_sectorDeLaEmpresa = $('#id_sectorDeLaEmpresa').val();
            var id_areaDeTrabajo = $('#id_areaDeTrabajo').val();
            var id_cargoQueOcupa = $('#id_cargoQueOcupa').val();
            var id_nombreJefeInmediato = $('#id_nombreJefeInmediato').val();
            var id_areaTrabajoAfinConSuProfesion = $('#id_areaTrabajoAfinConSuProfesion').val();
            var id_tipoDeContrato = $('#id_tipoDeContrato').val();
            var id_rangoSalarial = $('#id_rangoSalarial').val();
            var id_checkTrabajoActual = $('#id_checkTrabajoActual').val();
            var id_fechaFin = $('#id_fechaFin').val();
            var id_fechaInicio = $('#id_fechaInicio').val();
           
            if(id_nombreEmpresaTrabajoActual !="" &&
                id_sectorDeLaEmpresa !="" &&
                id_areaDeTrabajo !="" &&
                id_cargoQueOcupa !="" &&
                id_nombreJefeInmediato !="" &&
                id_areaTrabajoAfinConSuProfesion !="" &&
                id_tipoDeContrato !="" &&
                id_rangoSalarial !="" &&
                id_checkTrabajoActual !=""&&
                id_fechaInicio != ""  
                ){
            
                var ed = {
                    id_nombreEmpresaTrabajoActual : id_nombreEmpresaTrabajoActual,
                    id_sectorDeLaEmpresa : id_sectorDeLaEmpresa,
                    id_areaDeTrabajo : id_areaDeTrabajo,
                    id_cargoQueOcupa : id_cargoQueOcupa,
                    id_nombreJefeInmediato : id_nombreJefeInmediato,
                    id_areaTrabajoAfinConSuProfesion : id_areaTrabajoAfinConSuProfesion,
                    id_tipoDeContrato : id_tipoDeContrato,
                    id_rangoSalarial : id_rangoSalarial,
                    id_checkTrabajoActual : id_checkTrabajoActual,
                    id_fechaInicio:id_fechaInicio,
                    id_fechaFin:id_fechaFin

                };
            
                // var x = document.getElementsByClassName('quitarCheckTrabajo');
                // for(var i = 0; i<x.length;i++){
                //     x[i].innerHTML = "No";
                // }

                $.ajax({
                    url: "{% url 'guardar_info_laboral' %}",
                    type: "POST",
                    data: ed,
                    cache:false,
                    dataType: "json",
                    success: function(resp){
                        var meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
                        var fechaInicio = id_fechaInicio.split("-");
                        var fechaFin = id_fechaFin.split("-");
                        var html = `
                            <tr id="ocultarlaboral${resp.id}">
                                <div>
                                    <td>
                                        ${resp.id_nombreEmpresaTrabajoActual}
                                    </td>
                                    <td>
                                        ${fechaInicio[2]} de ${meses[fechaInicio[1]-1]} de ${fechaInicio[0]}
                                    </td>
                                    <td>
                                        ${fechaFin[2]} de ${meses[fechaFin[1]-1]} de ${fechaFin[0]}
                                    </td>
                                    <td>
                                        <!-- Modal Trigger -->
                                        <a class="btn btn-info btn-round btn-sm btn modal-trigger" href="#infoModal${resp.id}"><i class="material-icons">zoom_in</i></a>
                                        <button type="button" rel="tooltip" class="btn btn-danger btn-round btn-sm" onclick="eliminarLaboral(${resp.id})" >
                                            <i class="material-icons">close</i>
                                        </button>

                                    </td>
                                </div>
                            </tr>

                            <div id="infoModal${resp.id}" class="modal bottom-sheet">
                                <div class="modal-content">
                                    <h5>Más información</h5>
                                    <br>
                                        <div class="row">
                                            <div class="col-lg-4 col-md-6  form-group">

                                            <label for="id_situacion_laboral_actual">Fecha de ingreso</label><br>
                                                ${fechaInicio[2]} de ${meses[fechaInicio[1]-1]} de ${fechaInicio[0]}
                                            </div>

                                            <div class="col-lg-4 col-md-6  form-group">
                                                <label for="id_situacion_laboral_actual">Fecha de finalización</label><br>
                                                ${fechaFin[2]} de ${meses[fechaFin[1]-1]} de ${fechaFin[0]}
                                            </div>

                                            <div class="col-lg-4 col-md-6  form-group">
                                            <label for="inf.nombreEmpresaTrabajoActual">Nombre de la empresa</label><br>
                                                ${resp.id_nombreEmpresaTrabajoActual}
                                            </div>
                                            <div class="col-lg-4 col-md-6  form-group">
                                            <label for="inf.sectorDeLaEmpresa">Sector de la empresa</label><br>
                                                ${resp.id_sectorDeLaEmpresa}
                                            </div>
                                            <div class="col-lg-4 col-md-6  form-group">
                                            <label for="inf.areaDeTrabajo">Área de trabajo</label><br>
                                                ${resp.id_areaDeTrabajo}
                                            </div>
                                            <div class="col-lg-4 col-md-6  form-group">
                                            <label for="inf.cargoQueOcupa">Cargo que ocupa</label><br>
                                                ${resp.id_cargoQueOcupa}
                                            </div>
                                            <div class="col-lg-4 col-md-6  form-group">
                                            <label for="inf.nombreJefeInmediato">Nombre del jefe inmediato</label><br>
                                                ${resp.id_nombreJefeInmediato}
                                            </div>
                                            <div class="col-lg-4 col-md-6  form-group">
                                            <label for="inf.areaTrabajoAfinConSuProfesion">¿El área de trabajo es afín a su profesión?</label><br>
                                                ${resp.id_areaTrabajoAfinConSuProfesion}
                                            </div>
                                            <div class="col-lg-4 col-md-6  form-group">
                                            <label for="inf.tipoDeContrato">Tipo De Contrato</label><br>
                                                ${resp.id_tipoDeContrato}
                                            </div>
                                            <div class="col-lg-4 col-md-6  form-group">
                                            <label for="inf.rangoSalarial">RangoSalarial</label><br>
                                                ${resp.id_rangoSalarial}
                                            </div>
                                            <div class="col-lg-4 col-md-6  form-group">
                                            <label for="inf.rangoSalarial">¿Este es su trabajo actual?</label>
                                            <p class="quitarCheckTrabajo">${resp.id_checkTrabajoActual}</p>
                                            </div>
                                        </div>
                                            <div class="modal-footer">
                                            <a href="#!" class="modal-close waves-effect waves-green btn-flat">Cerrar</a>
                                            </div>
                                </div>
                            </div>   
                                        
                        
                        `;
                        document.querySelector('.auxlaboral').innerHTML += html;
                        let aux = document.querySelector('.modalInfoLaboral');
                        var instance = M.Modal.getInstance(aux);
                        instance.close();
                        window.location.reload();

                    }
                    
                });
                //aqui termina el if para button

        }
        else{
            
            if( id_nombreEmpresaTrabajoActual == ""  ) {
                $('#id_nombreEmpresaTrabajoActual').focus();
                   lanzaToast('"Nombre de la empresa"');
                }
            else if( id_sectorDeLaEmpresa == "" ) {
                $('#id_sectorDeLaEmpresa').focus();
                lanzaToast('"Sector de la empresa"');
                }
            else if( id_fechaInicio == "" ) {
                $('#id_fechaInicio').focus();
                lanzaToast('"Fecha de vinculación "');
                }
            // else if( id_fechaFin == "" ) {
            //     $('#id_fechaFin').focus();
            //     lanzaToast('"Fecha de finalización "');
            //     }
            else if( id_areaDeTrabajo == "" ) {
                $('#id_areaDeTrabajo').focus();
                lanzaToast('"Area de trabajo"');
                }
            else if( id_cargoQueOcupa == "" ) {
                $('#id_cargoQueOcupa').focus();
                lanzaToast('"Cargo que ocupa"');
                }
            else if( id_nombreJefeInmediato == "" ) {
                $('#id_nombreJefeInmediato').focus();
                lanzaToast('"Nombre del jefe inmediato"');
                }
            else if( id_areaTrabajoAfinConSuProfesion == "" ) {
                $('#id_areaTrabajoAfinConSuProfesion').focus();
                lanzaToast('"Area de trabajo de acuerdo su profesión"');
                }
            else if( id_tipoDeContrato == "" ) {
                $('#id_tipoDeContrato').focus().select();
                lanzaToast('"Tipo de contrato"');
                }
            else if( id_rangoSalarial == "" ) {
                $('#id_rangoSalarial').focus();
                lanzaToast('"Rango salarial"');
                }
            else if( id_checkTrabajoActual == "" ) {
                $('#id_checkTrabajoActual').focus();
                lanzaToast('"¿Es su trabajo actual?"');
                }
            
        }
        });

        function lanzaToast(texto){
            M.toast({html:`Complete el campo: ${texto}`})
        }

	</script>
	 {%endblock%}
